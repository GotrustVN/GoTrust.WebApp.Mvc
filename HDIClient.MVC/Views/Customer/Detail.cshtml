@{
    ViewData["Title"] = "Thông tin khách hàng";
}

@model CustomerDetailViewModel

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link href="~/css/select2-theme-bootstrap4/dist/select2-bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>


<div class="row w-100 m-0">
    <form asp-action="Edit" asp-controller="Customer" class="w-100">
        <input type="hidden" asp-for="code" />
        <div class="card w-100">
            <div class="card-header">
                <h3 class="card-title">Thông tin khách hàng</h3>
            </div>
            <div class="card-body px-0">
                <div class="row w-100 m-0">
                    <div class="col-md-1">
                        <label>Họ và tên</label>
                    </div>
                    <div class="col-md-3">
                        <input class="form-control" asp-for="name" />
                    </div>
                    <div class="col-md-1">
                        <label>Ngày sinh</label>
                    </div>
                    <div class="col-md-3">
                        <input class="form-control" asp-for="dateOfBirth" type="date" />
                    </div>
                    <div class="col-md-1">
                        <label>Giới tính</label>
                    </div>
                    <div class="col-md-3">
                        <select asp-for="genderCode" class="select form-control"
                                asp-items="@(new SelectList(Model.genders,"code","name"))"></select>
                    </div>
                </div>

                <div class="row w-100 m-0 mt-0 mt-md-1">
                    <div class="col-md-1">
                        <label>Loại</label>
                    </div>
                    <div class="col-md-3">
                        <select asp-for="typeCode" class="select form-control"
                                asp-items="@(new SelectList(Model.customerTypes,"code","name"))"></select>
                    </div>
                    <div class="col-md-1">
                        <label>Điện thoại</label>
                    </div>
                    <div class="col-md-3">
                        <input class="form-control" asp-for="phone" />
                    </div>
                    <div class="col-md-1">
                        <label>Email</label>
                    </div>
                    <div class="col-md-3">
                        <input class="form-control" asp-for="email" />
                    </div>
                </div>
                <div class="row w-100 m-0 mt-0 mt-md-1">
                    <div class="col-md-1">
                        <label>Ghi chú</label>
                    </div>
                    <div class="col-md-11">
                        <input rows="4" class="form-control" asp-for="note" />
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="row">
                    <div class="col-12 col-md-9"></div>
                    <div class="col-4 col-md-1">
                        <a href="https://www.gotrust.vn/" class="btn btn-dark w-100">
                            <i class="far fa-window-close"></i>
                        </a>
                    </div>
                    <div class="col-4 col-md-1">
                        <a asp-action="Detail" asp-route-code="@Model.code" class="btn btn-warning w-100 text-white">
                            <i class="fas fa-sync"></i>
                        </a>
                    </div>
                    <div class="col-4 col-md-1">
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<div class="row w-100 m-0 mt-1">
    <div class="card w-100">
        <div class="card-header">
            <h3 class="card-title">Sản phẩm</h3>
        </div>
        <div class="card-body px-2">
            <div class="row m-0 w-100">
                <div class="col-md-3 mt-1 mt-md-0">
                    <div class="d-flex flex-row flex-md-column justify-content-start align-items-center">
                        <img src="~/image/item.png" height="80" style="border-radius: 50%;border: solid 2px #296f39" />
                        <div class="mt-0 mt-md-1 ml-1 ml-md-0">
                            <h5 class="card-title text-left text-md-center" style="color:#296f39">Bảo hiểm tai nạn</h5>
                            <div class="text-md-center d-flex text-lg-center">
                                <a asp-action="Create" asp-controller="HealthInsuranceOrder" 
                                   asp-route-customerCode="@Model.code" asp-route-categoryCode="CN.03" class="btn btn-primary">Chọn mua</a>
                                <button class="btn ml-1 text-white" style="background-color:#296f39">Quyền lợi</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mt-1 mt-md-0">
                    <div class="d-flex flex-row flex-md-column justify-content-start align-items-center">
                        <img src="~/image/item.png" height="80" style="border-radius: 50%; border: solid 2px #296f39" />
                        <div class="mt-0 mt-md-1 ml-1 ml-md-0">
                            <h5 class="card-title text-left text-md-center" style="color:#296f39">Bảo hiểm sức khỏe</h5>
                            <div class="text-md-center d-flex text-lg-center">
                                <a asp-action="Create" asp-controller="HealthInsuranceOrder" 
                                   asp-route-customerCode="@Model.code" asp-route-categoryCode="CN.02" class="btn btn-primary">Chọn mua</a>
                                <button class="btn ml-1 text-white" style="background-color:#296f39">Quyền lợi</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mt-1 mt-md-0">
                    <div class="d-flex flex-row flex-md-column justify-content-start align-items-center">
                        <img src="~/image/item.png" height="80" style="border-radius: 50%;border: solid 2px #296f39" />
                        <div class="mt-0 mt-md-1 ml-1 ml-md-0">
                            <h5 class="card-title text-left text-md-center" style="color:#296f39">Bảo hiểm xe máy</h5>
                            <div class="text-md-center d-flex text-lg-center">
                                <button class="btn btn-primary">Chọn mua</button>
                                <button class="btn ml-1 text-white" style="background-color:#296f39">Quyền lợi</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mt-1 mt-md-0">
                    <div class="d-flex flex-row flex-md-column justify-content-start align-items-center">
                        <img src="~/image/item.png" height="80" style="border-radius: 50%;border: solid 2px #296f39" />
                        <div class="mt-0 mt-md-1 ml-1 ml-md-0">
                            <h5 class="card-title text-left text-md-center" style="color:#296f39">Bảo hiểm ô tô</h5>
                            <div class="text-md-center d-flex text-lg-center">
                                <button class="btn btn-primary">Chọn mua</button>
                                <button class="btn ml-1 text-white" style="background-color:#296f39">Quyền lợi</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal-area-content"></div>
<script>
    $(document).ready(() => {
        $('.select').select2({
            theme: "bootstrap",
            placeholder: '-- Root --',
            allowClear: true
        });
    })

    onEditAddress = () => {
        $.ajax({
            type: 'GET',
            url: '@Url.Action("Address","Common")',
            data: {
                provinceCode: $("#provinceCode").val(),
                districtCode: $("#districtCode").val(),
                wardCode: $("#wardCode").val(),
                address: $("#address").val(),
                fullAddress: $("#fullAddress").val(),
            },
            success: (res) => {
                $("#modal-area-content").empty();
                $("#modal-area-content").html(res);
            }
        }).done(() => {
            Init(null, () =>
            {
                $('#provinceCode').val($('#province').val());
                $('#districtCode').val($('#district').val());
                $('#wardCode').val($('#ward').val());
                $('#address').val($('#additionalAddress').val());
                $('#fullAddress').val($('#resultAddress').val());
                $("#address-modal").modal("hide");
            });
        })
    }
</script>